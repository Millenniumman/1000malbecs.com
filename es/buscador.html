<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Busca los mejores Malbecs argentinos por provincia, regiÃ³n, bodega y mÃ¡s.">
    <title>1000malbecs - Buscador de Vinos</title>
    <link rel="stylesheet" href="/css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="/js/wine-search.js" defer></script>
</head>
<body x-data="wineSearch()">
    <button class="hamburger">â˜°</button>
    <div id="sidebar"></div>
    <div class="language-selector">
        <a href="/es/buscador.html" data-lang="es" aria-label="EspaÃ±ol">ES ðŸ‡ªðŸ‡¸</a>
        <a href="/en/buscador.html" data-lang="en" aria-label="InglÃ©s">EN ðŸ‡¬ðŸ‡§</a>
        <a href="/de/buscador.html" data-lang="de" aria-label="AlemÃ¡n">DE ðŸ‡©ðŸ‡ª</a>
    </div>
    <h1>Buscador de Vinos</h1>
    <div class="filters">
        <div class="filter-group">
            <label for="provincia">Provincia</label>
            <select id="provincia" x-model="filters.provincia">
                <option value="">Seleccionar provincia</option>
                <template x-for="item in uniqueValues.provincia" :key="item">
                    <option :value="item" x-text="item"></option>
                </template>
            </select>
        </div>
        <div class="filter-group">
            <label for="region">RegiÃ³n</label>
            <select id="region" x-model="filters.region">
                <option value="">Seleccionar regiÃ³n</option>
                <template x-for="item in uniqueValues.region" :key="item">
                    <option :value="item" x-text="item"></option>
                </template>
            </select>
        </div>
        <div class="filter-group">
            <label for="altura">Altura</label>
            <select id="altura" x-model="filters.altura">
                <option value="">Seleccionar altura</option>
                <template x-for="item in uniqueValues.altura" :key="item">
                    <option :value="item" x-text="item"></option>
                </template>
            </select>
        </div>
        <div class="filter-group">
            <label for="bodega">Bodega</label>
            <select id="bodega" x-model="filters.bodega">
                <option value="">Seleccionar bodega</option>
                <template x-for="item in uniqueValues.bodega" :key="item">
                    <option :value="item" x-text="item"></option>
                </template>
            </select>
        </div>
        <div class="filter-group">
            <label for="aÃ±o">AÃ±o</label>
            <select id="aÃ±o" x-model="filters.aÃ±o">
                <option value="">Seleccionar aÃ±o</option>
                <template x-for="item in uniqueValues.aÃ±o" :key="item">
                    <option :value="item" x-text="item"></option>
                </template>
            </select>
        </div>
        <div class="filter-group">
            <label for="marca">Marca</label>
            <select id="marca" x-model="filters.marca">
                <option value="">Seleccionar marca</option>
                <template x-for="item in uniqueValues.marca" :key="item">
                    <option :value="item" x-text="item"></option>
                </template>
            </select>
        </div>
        <div class="filter-group">
            <label for="variedad">Variedad</label>
            <select id="variedad" x-model="filters.variedad">
                <option value="">Seleccionar variedad</option>
                <template x-for="item in uniqueValues.variedad" :key="item">
                    <option :value="item" x-text="item"></option>
                </template>
            </select>
        </div>
        <button @click="clearFilters()">Limpiar Filtros</button>
    </div>
    <h3 class="section-title">Nuestros Vinos</h3>
    <div class="product-grid">
        <template x-for="wine in filteredWines" :key="wine.sku">
            <div class="product-card">
                <img :src="wine.Imagen" :alt="wine.Nombre" class="product-image">
                <h3 x-text="wine.Nombre"></h3>
                <p x-text="wine.Bodega"></p>
                <p x-text="wine.AÃ±o"></p>
                <p x-text="wine.Provincia"></p>
                <p x-text="wine.RegiÃ³n"></p>
                <p x-text="wine.Altura + ' msnm'"></p>
                <p x-text="wine.Tipo"></p>
                <p x-text="'$' + wine.Precio.toFixed(2)"></p>
                <button @click="toggleOverlay(wine.sku)">Ver mÃ¡s</button>
                <div class="overlay" :data-overlay-id="wine.sku">
                    <h3 x-text="wine.Nombre"></h3>
                    <p x-text="wine.DescripciÃ³n"></p>
                    <a :href="wine.url">Ver detalles</a>
                    <button @click="toggleOverlay(wine.sku)">Cerrar</button>
                </div>
            </div>
        </template>
        <p x-show="!filteredWines.length" class="no-data">No se encontraron vinos. Ajusta los filtros.</p>
    </div>
</body>
</html>
